(this["webpackJsonpflash-cards"]=this["webpackJsonpflash-cards"]||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),s=n(37),r=n.n(s),o=n(9),i=n(4),l=n(13),u=(n(47),n(48),n(49),n(50),{apiKey:"AIzaSyB25ZqbIrDuXWUokLFcsbltpjUf5pjhb-w",authDomain:"flashcardapp-d3306.firebaseapp.com",databaseURL:"https://flashcardapp-d3306.firebaseio.com",projectId:"flashcardapp-d3306",storageBucket:"flashcardapp-d3306.appspot.com",messagingSenderId:"635798969664",appId:"1:635798969664:web:562fb322eeb9d31667eea5",measurementId:"G-XSQ0TX77TY"});l.a.initializeApp(u);var d=l.a.auth(),j=l.a.firestore(),b=l.a,O=l.a.storage(),h=n(1),f=a.a.createContext(),g=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){var e=d.onAuthStateChanged((function(e){s(e||null)}));return function(){return e()}})),Object(h.jsx)(f.Provider,{value:{user:a},children:e.children})},m=(n(52),n(53),n(14)),x=function(e){var t=l.a.firestore(),n=Object(c.useState)([]),a=Object(i.a)(n,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){if(e){var n=t.collection("decks").where("owner","==",e.uid).onSnapshot((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),r(t)}),(function(e){return console.log("Error: ",e.message)}));return function(){return n()}}r([])}),[e]),{decks:s}},p=function(e){var t=l.a.firestore(),n=Object(c.useState)([]),a=Object(i.a)(n,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){if(e){var n=t.collection("users").doc(e.uid).onSnapshot((function(e){var t=[];e.data().save_decks.forEach((function(e){return t.push(e)})),r(t),localStorage.setItem("save_decks",JSON.stringify(t))}),(function(e){return console.log("Error: ",e.message)}));return function(){return n()}}r([])}),[e]),{saveDecks:s}},v=function(){var e=l.a.firestore(),t=Object(c.useState)([]),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){var t=e.collection("decks").where("isPublic","==",!0).onSnapshot((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),s(t)}),(function(e){return console.log("Error: ",e.message)}));return function(){return t()}}),[]),{allDecks:a}},k=n(7),C=n(6),w=function(e){var t=e.size,n=void 0===t?"1x":t;return Object(h.jsx)(k.a,{icon:C.p,size:n,className:"spinner"})},S=function(e,t){e?j.collection("decks").doc(t).delete().then(console.log("Deck successfully deleted.")).catch((function(e){console.error("Error deleting deck: ",e.message)})):console.log("No user selected.")},N=function(e,t){if(e)return j.collection("users").doc(e.uid).update({save_decks:l.a.firestore.FieldValue.arrayUnion(t)}).then((function(){j.collection("decks").doc(t.id).update({saveCount:l.a.firestore.FieldValue.increment(1)}).then((function(){console.log("Updated save count number of deck with id: ",t.id)})).catch((function(e){console.error("Error updating document: ",e.message)})),console.log("Updated deck with id: ",t.id)})).catch((function(e){console.error("Error updating document: ",e.message)}));console.log("No user selected.")},y=function(e,t){if(e)return j.collection("users").doc(e.uid).update({save_decks:l.a.firestore.FieldValue.arrayRemove({id:t.id,numCards:t.numCards,owner:t.owner,title:t.title,description:t.description,cards:t.cards,isPublic:t.isPublic})}).then((function(){j.collection("decks").doc(t.id).get().then((function(e){e.data().saveCount>0?j.collection("decks").doc(t.id).update({saveCount:l.a.firestore.FieldValue.increment(-1)}).then((function(){console.log("Updated save count number of deck with id: ",t.id)})).catch((function(e){console.error("Error updating document: ",e.message)})):j.collection("decks").doc(t.id).update({saveCount:0}).then((function(){console.log("Updated save count number of deck with id: ",t.id)})).catch((function(e){console.error("Error updating document: ",e.message)}))})).catch((function(e){console.error("Error getting document data: ",e.message)}));console.log("Updated deck with id: ",t.id)})).catch((function(e){console.error("Error updating document: ",e.message)}));console.log("No user selected.")},E=function(e,t,n,c,a){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(e){var r={title:n,description:c,cards:a,numCards:a.length,isPublic:s};return j.collection("decks").doc(t).update(r).then((function(){console.log("Updated deck with id: ",t)})).catch((function(e){console.error("Error updating document: ",e.message)}))}console.log("No user selected.")},D=function(e){var t=e.labelText,n=e.icon,a=void 0===n?null:n,s=e.type,r=void 0===s?"text":s,o=e.id,l=void 0===o?"":o,u=e.name,d=void 0===u?"":u,j=(e.placeholder,e.value),b=e.onChange,O=e.autocomplete,f=void 0===O?"on":O,g=Object(c.useState)(!0),m=Object(i.a)(g,2),x=m[0],p=m[1];return null===a&&"password"===r&&(a=Object(h.jsx)(k.a,{icon:C.j})),Object(h.jsxs)("div",{className:"input-block",children:[Object(h.jsx)("label",{htmlFor:l,children:t}),Object(h.jsxs)("div",{className:"input-row",children:[a,Object(h.jsx)("input",{type:"password"===r?x?"password":"text":r,name:d,id:l,value:j,onChange:b,style:{outline:"none"},autoComplete:f}),"password"===r&&Object(h.jsx)("button",{type:"button",className:"btn btn-icon",onClick:function(e){e.preventDefault(),p((function(e){return!e}))},children:x?Object(h.jsx)(k.a,{icon:C.h}):Object(h.jsx)(k.a,{icon:C.i})})]})]})},U=function(e){var t,n=e.title,c=e.styles,a=void 0===c?{textAlign:"center"}:c;return t=Object(h.jsx)("h1",{style:a,children:n}),Object(h.jsx)("header",{className:"page-heading",children:t})},P=function(e){var t=e.onSetImage,n=e.imageRef,a=Object(c.useState)(null),s=Object(i.a)(a,2),r=s[0],o=s[1],l=Object(c.useState)(n),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(c.useContext)(f).user;return Object(c.useEffect)((function(){n&&(console.log(n),O.ref(n).getDownloadURL().then((function(e){o(e)})),j(n))}),[n]),Object(h.jsxs)("div",{style:{paddingBottom:20},children:[d&&Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{alt:"not fount",width:"250px",src:r}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:function(){O.ref(d).delete().then((function(){console.log("File deleted successfully"),t(null)})).catch((function(e){}))},children:"Remove"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",name:"myImage",onChange:function(e){d&&O.ref(d).delete().then((function(){console.log("File deleted successfully"),t(null)})).catch((function(e){}));var n=O.ref("".concat(b.uid,"/").concat(e.target.files[0].name)).put(e.target.files[0]);n.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){}),(function(){O.ref("".concat(b.uid)).child(e.target.files[0].name).getDownloadURL(n.snapshot.ref).then((function(n){console.log("File available at",n),t("".concat(b.uid,"/").concat(e.target.files[0].name)),o(n),j("".concat(b.uid,"/").concat(e.target.files[0].name))}))}))}})]})},F=function(e){var t=e.index,n=e.card,a=e.onSubmit,s=e.onUpdate,r=e.onDelete,o=(Object(c.useContext)(f).user,Object(c.useState)("")),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(i.a)(j,2),O=b[0],g=b[1],m=Object(c.useState)(null),x=Object(i.a)(m,2),p=x[0],v=x[1];Object(c.useEffect)((function(){d(n.front),g(n.back),v(n.imageRef)}),[n]);var w=function(e){"front"===e.target.name?d(e.target.value):"back"===e.target.name&&g(e.target.value)};return Object(h.jsxs)("form",{className:"card-editor",onSubmit:function(e){e.preventDefault(),console.log("Card to update: ",n.id),s(t,u,O,p),a()},children:[Object(h.jsxs)("div",{className:"input-block",children:[Object(h.jsx)("textarea",{name:"front",id:n.id+"-front",value:u,onChange:w}),Object(h.jsx)("label",{htmlFor:n.id+"-front",children:"Front"})]}),Object(h.jsxs)("div",{className:"input-block",children:[Object(h.jsx)("textarea",{name:"back",id:n.id+"-back",value:O,onChange:w}),Object(h.jsx)("label",{htmlFor:n.id+"-back",children:"Back"})]}),Object(h.jsx)(P,{onSetImage:function(e){v(e)},imageRef:p}),Object(h.jsx)("button",{className:"btn",children:"Update"}),Object(h.jsxs)("button",{className:"btn btn-warning",onClick:function(e){e.preventDefault(),r(t)},children:[Object(h.jsx)(k.a,{icon:C.r})," Delete card"]})]})},T=function(e){var t=e.onCreateCard,n=Object(c.useState)(!1),a=Object(i.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(i.a)(j,2),O=b[0],f=b[1],g=Object(c.useState)(null),m=Object(i.a)(g,2),x=m[0],p=m[1],v=function(e){"front"===e.target.name?d(e.target.value):"back"===e.target.name&&f(e.target.value)};return s?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("button",{id:"add",className:"btn btn-tertiary highlighted",onClick:function(){return r(!1)},children:["Add card ",Object(h.jsx)(k.a,{icon:C.k,className:"icon"})]}),Object(h.jsxs)("form",{className:"card-editor",onSubmit:function(e){e.preventDefault(),console.log("Creating new card."),t(u,O,x),d(""),f(""),p(null),r(!1)},children:[Object(h.jsxs)("div",{className:"input-block",children:[Object(h.jsx)("textarea",{name:"front",id:"new-front",value:u,onChange:v}),Object(h.jsx)("label",{htmlFor:"new-front",children:"Front"})]}),Object(h.jsxs)("div",{className:"input-block",children:[Object(h.jsx)("textarea",{name:"back",id:"new-back",value:O,onChange:v,style:{outline:"none"}}),Object(h.jsx)("label",{htmlFor:"new-back",children:"Back"})]}),Object(h.jsx)(P,{onSetImage:function(e){p(e)},imageRef:x}),Object(h.jsx)("button",{className:"btn",children:"Create"})]})]}):Object(h.jsxs)("button",{className:"btn btn-tertiary",onClick:function(){return r(!0)},children:["Add card ",Object(h.jsx)(k.a,{icon:C.m,className:"icon"})]})},I=function(e){var t=e.listCards,n=e.onCards,s=Object(c.useState)(t||[]),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(c.useState)(-1),d=Object(i.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)([]),f=Object(i.a)(O,2),g=f[0],m=f[1],x=function(e){console.log(e.target.value),b((function(t){return t===e.target.value?-1:e.target.value}))},p=function(e){o.splice(e,1),l(o),n(o),w()},v=function(e,t,c,a){o[e]={front:t,back:c,imageRef:a},l(o),n(o),w()};Object(c.useEffect)((function(){l(t)}),[t]),Object(c.useEffect)((function(){w()}),[j,o]);var w=function(){var e=o.map((function(e,t){var n=t===j?"btn btn-tertiary highlighted":"btn btn-tertiary";return console.log(t),console.log(e),Object(h.jsxs)(a.a.Fragment,{children:[Object(h.jsxs)("button",{className:n,value:t,onClick:x,children:[Object(h.jsxs)("span",{className:"truncate",children:['"',e.front,'"']}),j==="".concat(t)?Object(h.jsx)(k.a,{icon:C.d}):Object(h.jsx)(k.a,{icon:C.a})]}),j==="".concat(t)&&Object(h.jsx)(F,{index:t,card:e,onSubmit:function(){return b("")},onDelete:p,onUpdate:v})]},t)}));m(e)};return Object(h.jsxs)(h.Fragment,{children:[g,Object(h.jsx)(T,{onCreateCard:function(e,t,c){var a={front:e,back:t,imageRef:c};console.log(28888,a),o.push(a),l(o),n(o),w()}})]})},A=n(19),L=function(e){var t,n=e.deckToEdit,a=e.setDeckToEdit,s=Object(c.useContext)(f).user,r=Object(m.f)(),o=JSON.parse(localStorage.getItem("deck")),u=n||o,d=Object(c.useState)(u.title),j=Object(i.a)(d,2),b=j[0],O=j[1],g=Object(c.useState)(!1),x=Object(i.a)(g,2),p=x[0],v=x[1],w=Object(c.useState)(u.description),N=Object(i.a)(w,2),y=N[0],P=N[1],F=Object(c.useState)([]),T=Object(i.a)(F,2),L=T[0],R=T[1];console.log(u);var B=Object(c.useState)(null===(t=u.isPublic)||void 0===t||t),M=Object(i.a)(B,2),W=M[0],_=M[1],J=function(){E(s,u.id,b,y,L,W),a(Object(A.a)(Object(A.a)({},n),{},{title:b})),v(!0),setTimeout((function(){return v(!1)}),3e3)},z=l.a.firestore();Object(c.useEffect)((function(){u&&(console.log(u),z.collection("decks").doc(u.id).get().then((function(e){var t,n=[];null===(t=e.data().cards)||void 0===t||t.forEach((function(e){return n.push(e)})),R(n)})).catch((function(e){return console.log("Error: ",e.message)})))}),[]);return Object(h.jsxs)("div",{style:{textAlign:"left"},children:[Object(h.jsx)(U,{title:"\u30bb\u30c3\u30c8\u3092\u7de8\u96c6\u3059\u308b",styles:{textAlign:"left"}}),Object(h.jsxs)("form",{onSubmit:J,children:[Object(h.jsx)(D,{labelText:"\u984c\u540d",icon:Object(h.jsx)(k.a,{icon:C.l}),id:"title",name:"title",value:b,onChange:function(e){return O(e.target.value)},placeholder:"New Deck",autocomplete:"off"}),Object(h.jsx)(D,{labelText:"\u8aac\u660e",icon:Object(h.jsx)(k.a,{icon:C.e}),id:"description",name:"description",value:y,onChange:function(e){return P(e.target.value)},autocomplete:"off"}),Object(h.jsx)("input",{id:"public",name:"public",type:"checkbox",checked:!W,onChange:function(){return _(!W)}}),Object(h.jsxs)("label",{htmlFor:"public",children:[Object(h.jsx)("span",{}),"\u79c1\u3060\u3051\u304c\u7de8\u96c6\u3059\u308b\u6a29\u5229\u3092\u6301\u3063\u3066\u3044\u307e\u3059?"]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)(U,{title:"\u30ab\u30fc\u30c9",styles:{textAlign:"left"}}),Object(h.jsx)(I,{listCards:L,onCards:function(e){R(e)}})]}),Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(e){J()},children:p?"Success!":"\u7de8\u96c6"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(U,{title:"\u30c7\u30c3\u30ad\u3092\u524a\u9664\u3059\u308b",styles:{textAlign:"left"}}),Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault(),S(s,u.id),r.push("/app"),a(null)},children:Object(h.jsx)("button",{className:"btn btn-warning",children:"\u524a\u9664\u3059\u308b"})})]})]})},R=n(39),B=n.n(R),M=function(e){e.toggleDeck,e.setSelectedDecks;var t=e.length,n=e.deck,a=e.setDeckToEdit,s=e.mine,r=Object(m.f)(),o=Object(c.useContext)(f).user,l=Object(c.useState)(!1),u=Object(i.a)(l,2),d=u[0],j=u[1],b=localStorage.getItem("save_decks");Object(c.useEffect)((function(){j(O())}),[]);var O=function(){if(!b||0==b.length)return!1;var e=JSON.parse(b);if(!e||0==e.length)return!1;var t=e.filter((function(e){return e.id==n.id}));return t&&t.length>0};return Object(h.jsxs)("li",{style:{background:"#EAB2AE",marginBottom:20,borderRadius:10},children:[Object(h.jsx)("div",{onClick:function(){r.push("/app/d/"+n.id)},children:Object(h.jsxs)("label",{htmlFor:"checkbox",className:"truncate",children:[Object(h.jsx)("span",{}),Object(h.jsx)("strong",{children:n.title})," (",t," ","\u30ab\u30fc\u30c9",")"]})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"\u4fdd\u5b58\u3059\u308b\u4eba\u306e\u6570:\xa0"}),Object(h.jsx)("span",{style:{fontWeight:"700"},children:n.saveCount})]}),Object(h.jsx)("div",{className:"button-row",children:s?Object(h.jsxs)("button",{className:"btn btn-icon",style:{color:"black"},onClick:function(e){e.stopPropagation(),a(),localStorage.setItem("deck",JSON.stringify(n)),r.push("/app/edit")},children:[Object(h.jsx)(k.a,{icon:C.f})," \u7de8\u96c6\u3059\u308b"]}):Object(h.jsxs)("button",{className:"btn btn-icon",style:{color:"black"},onClick:function(e){e.stopPropagation(),d?(console.log(n),y(o,n),j(!1)):(N(o,n),j(!0))},children:[Object(h.jsx)(k.a,{icon:d?C.r:C.o})," ",d?"\u524a\u9664\u3059\u308b":"\u4fdd\u5b58\u3059\u308b"]})})]})};function W(e){var t=e.currentItems;e.user,e.setDeckToEdit;return Object(h.jsx)(a.a.Fragment,{children:t})}function _(e){var t=e.itemsPerPage,n=e.decks,a=e.user,s=(e.setDeckToEdit,Object(c.useState)(null)),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(c.useState)(0),d=Object(i.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(0),f=Object(i.a)(O,2),g=f[0],m=f[1];Object(c.useEffect)((function(){var e=g+t;console.log("Loading items from ".concat(g," to ").concat(e)),l(n.slice(g,e)),b(Math.ceil(n.length/t))}),[g,t,n]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(W,{currentItems:o,user:a}),Object(h.jsx)(B.a,{nextLabel:"next >",onPageChange:function(e){var c=e.selected*t%n.length;console.log("User requested page number ".concat(e.selected,", which is offset ").concat(c)),m(c)},pageRangeDisplayed:3,marginPagesDisplayed:2,pageCount:j,previousLabel:"< previous",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",containerClassName:"pagination",activeClassName:"active",renderOnZeroPageCount:null})]})}var J=function(e){var t=e.decks,n=e.setDeckToEdit,a=Object(c.useState)([]),s=Object(i.a)(a,2),r=s[0],o=s[1],l=Object(c.useContext)(f).user;return Object(c.useEffect)((function(){t&&o(t.map((function(e){return Object(h.jsx)(M,{length:e.numCards,deck:e,mine:l&&e.owner==l.uid,setDeckToEdit:function(){n({id:e.id,title:e.title,private:e.private,description:e.description,isPublic:e.isPublic})}},e.id)})))}),[t]),Object(c.useEffect)((function(){}),[r]),Object(h.jsx)("div",{className:"deck-list",children:Object(h.jsx)("ul",{children:r.length>0?Object(h.jsx)(_,{itemsPerPage:4,decks:r,user:l,setDeckToEdit:n}):Object(h.jsx)("p",{children:"\u30bb\u30c3\u30c8\u304c\u3042\u308a\u307e\u305b\u3093\u3002 \u4f5c\u6210\u3057\u3066\u958b\u59cb\u3057\u3066\u304f\u3060\u3055\u3044\uff01"})})})},z=(n(33),function(e){var t=e.allDecks,n=Object(c.useContext)(f).user,a=Object(c.useState)(null),s=Object(i.a)(a,2),r=s[0],l=s[1],u=Object(m.f)();return n||u.push("/log-in"),Object(h.jsxs)(m.c,{children:[Object(h.jsx)(m.a,{path:"/app-edit",children:Object(h.jsx)(L,{deckToEdit:r,setDeckToEdit:l})}),Object(h.jsx)(m.a,{path:"/",children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{className:"hero",children:[Object(h.jsx)("section",{children:Object(h.jsx)("div",{className:"hero-content",children:Object(h.jsx)("div",{className:"buttons",children:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(o.b,{className:"btn btn-cta",to:"/app",children:"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9"})})})})}),Object(h.jsxs)("div",{className:"card-design",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{}),Object(h.jsx)("span",{}),Object(h.jsx)("span",{})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{}),Object(h.jsx)("span",{}),Object(h.jsx)("span",{})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{}),Object(h.jsx)("span",{}),Object(h.jsx)("span",{})]})]})]})]}),Object(h.jsx)("section",{className:"public-decks",children:Object(h.jsxs)("div",{children:[Object(h.jsx)(U,{title:"\u5168\u3066\u30bb\u30c3\u30c8"}),Object(h.jsx)("div",{style:{textAlign:"left"},children:Object(h.jsx)(J,{decks:t,setDeckToEdit:l})})]})})]})})]})}),V=n(21),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=Object(c.useContext)(f),o=r.user,l=Object(c.useState)(null),u=Object(i.a)(l,2),O=u[0],h=u[1],g=Object(c.useState)(null),m=Object(i.a)(g,2),x=m[0],p=m[1],v=Object(c.useState)("pending"),k=Object(i.a)(v,2),C=k[0],w=k[1],S=Object(c.useState)(0),N=Object(i.a)(S,2),y=N[0],E=N[1],D=Object(c.useState)(0),U=Object(i.a)(D,2),P=U[0],F=U[1],T=Object(c.useState)(0),I=Object(i.a)(T,2),A=I[0],L=I[1],R=Object(c.useState)(0),B=Object(i.a)(R,2),M=B[0],W=B[1],_=Object(c.useState)(0),J=Object(i.a)(_,2),z=J[0],V=J[1],X=Object(c.useState)(0),q=Object(i.a)(X,2),Q=q[0],Z=q[1];Object(c.useEffect)((function(){0!==y&&null==o&&(p(null),w("loading"),d.signInWithEmailAndPassword(t,n).then((function(e){var t=e.user;"u1UXlHy2wvUC0LfSb5lQxO5d2jh1"!=t.uid?(d.signOut(),w("error")):(h(t),w("success"))})).catch((function(e){console.error("Error logging user in: ",e.message),p(e),w("error")})))}),[y]),Object(c.useEffect)((function(){0!==P&&null==o&&(p(null),w("loading"),d.createUserWithEmailAndPassword(t,n).then((function(t){var n=t.user;j.collection("users").doc(n.uid).set({save_decks:[]}),t.user.updateProfile({displayName:e}),h(n),w("success")})).catch((function(e){console.error("Error signing user in: ",e.message),p(e),w("error")})))}),[P]),Object(c.useEffect)((function(){0!==A&&null!==o&&(p(null),w("loading"),d.signOut().then((function(){console.log("Logged out"),h(null),localStorage.removeItem("deck"),localStorage.removeItem("save_decks"),w("success")})).catch((function(e){console.error("Error logging user out: ",e.message),p(e.code),w("error")})))}),[A]),Object(c.useEffect)((function(){if(0!==M&&null!==o){p(null),w("loading");var c=b.auth.EmailAuthProvider.credential(d.currentUser.email,n);d.currentUser.reauthenticateWithCredential(c).then((function(){console.log("User successfully reauthenticated."),d.currentUser.updateEmail(t).then((function(){w("success")})).catch((function(e){p(e.code),w("error")})),w("loading"),d.currentUser.updateProfile({displayName:e,photoURL:s}).then((function(){h(d.currentUser),w("success")})).catch((function(e){p(e.code),w("error")}))})).catch((function(e){p(e.code),w("error")}))}}),[M]),Object(c.useEffect)((function(){if(0!==z&&null!==o){p(null),w("loading");var e=b.auth.EmailAuthProvider.credential(d.currentUser.email,n);d.currentUser.reauthenticateWithCredential(e).then((function(){console.log("User successfully reauthenticated."),d.currentUser.updatePassword(a).then((function(){w("success")})).catch((function(e){p(e.code),w("error")}))})).catch((function(e){p(e.code),w("error")}))}}),[z]),Object(c.useEffect)((function(){if(0!==Q&&null!==o){p(null),w("loading");var e=b.auth.EmailAuthProvider.credential(d.currentUser.email,n);d.currentUser.reauthenticateWithCredential(e).then((function(){d.currentUser.delete().then((function(){w("success")})).catch((function(e){p(e.code),w("error")}))})).catch((function(e){p(e.code),w("error")}))}}),[Q]);var G=function(){return E((function(e){return e+1}))},H=function(){return F((function(e){return e+1}))},K=function(){return L((function(e){return e+1}))},Y=function(){return W((function(e){return e+1}))},$=function(){return V((function(e){return e+1}))},ee=function(){return Z((function(e){return e+1}))},te=function(){return w("pending")};return{userData:O,error:x,status:C,handleLogin:G,handleSignup:H,handleLogout:K,handleChangeEmail:Y,handleChangePassword:$,handleDeleteAccount:ee,resetStatus:te}},q=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(m.f)(),r=Object(c.useState)({email:"",password:""}),o=Object(i.a)(r,2),l=o[0],u=o[1],d=X(null,l.email,l.password),j=d.status,b=d.error,O=d.handleLogin,g=Object(c.useContext)(f).user,x=function(e){var t=e.target,n=t.name,c=t.value;u((function(e){return Object(A.a)(Object(A.a)({},e),{},Object(V.a)({},n,c))}))};return Object(c.useEffect)((function(){g&&s.push("/user")}),[g]),Object(c.useEffect)((function(){if(null!==b)switch(b.code){case null:return void a("");case"auth/user-not-found":case"auth/wrong-password":return void a("\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002");case"auth/invalid-email":return void a("\u6709\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002");default:return void a("\u4f55\u304b\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3002\u3082\u3046\u4e00\u5ea6\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002")}else a("")}),[b]),Object(h.jsxs)("div",{className:"login",style:{textAlign:"center"},children:[Object(h.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginRight:200},children:Object(h.jsx)(U,{title:"\u30ed\u30b0\u30a4\u30f3"})}),Object(h.jsxs)("form",{style:{display:"inline-block"},onSubmit:function(e){e.preventDefault(),O()},children:[Object(h.jsx)(D,{labelText:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",icon:Object(h.jsx)(k.a,{icon:C.g}),id:"email",name:"email",value:l.email,onChange:x,placeholder:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(h.jsx)(D,{labelText:"\u30d1\u30b9\u30ef\u30fc\u30c9",icon:Object(h.jsx)(k.a,{icon:C.j}),type:"password",id:"password",name:"password",value:l.password,onChange:x}),""!==n&&Object(h.jsx)("p",{className:"error",children:n}),Object(h.jsx)("button",{className:"btn btn-primary",style:{backgroundColor:"#526CC6",borderColor:"unset",borderRadius:20,borderWidth:0},disabled:""===l.password||""===l.email,children:"loading"===j?"\u8aad\u307f\u8fbc\u307f\u4e2d . . . ":"success"===j?"\u6210\u529f":"\u30ed\u30b0\u30a4\u30f3"})]})]})},Q=function(){var e=Object(c.useContext)(f).user,t=X().handleLogout,n=Object(m.f)();return Object(c.useEffect)((function(){e&&(t(),setTimeout((function(){return n.push("/")}),1e3))}),[e]),Object(h.jsx)("div",{className:"container center",children:Object(h.jsxs)("p",{children:[Object(h.jsx)(w,{})," Logging out . . ."]})})},Z=function(e){var t=e.handleChange,n=e.inputs,a=e.error,s=e.onSubmit,r=e.status,o=Object(c.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1];return Object(c.useEffect)((function(){if(null!==a)switch(a){case null:return void d("");case"auth/wrong-password":return void d("Incorrect password.");default:return void d("Something went wrong. Please try again.")}else d("")}),[a]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(U,{title:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s()},children:[Object(h.jsx)(D,{labelText:"\u73fe\u5728\u306e\u30d1\u30b9\u30ef\u30fc\u30c9",icon:Object(h.jsx)(k.a,{icon:C.j}),type:"password",id:"password",name:"password",value:n.password,onChange:t}),Object(h.jsx)(D,{labelText:"\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9",icon:Object(h.jsx)(k.a,{icon:C.j}),type:"password",id:"new-password",name:"newPassword",value:n.newPassword,onChange:t}),""!==u&&Object(h.jsx)("p",{className:"error",children:u}),Object(h.jsx)("button",{className:"btn btn-primary",style:{color:"white",background:"#526CC6",border:"unset"},children:"loading"===r?"\u8aad\u307f\u8fbc\u307f\u4e2d . . . ":"success"===r?"\u6210\u529f":"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b"})]})]})},G=function(e){var t=e.handleChange,n=e.inputs,a=e.error,s=e.onSubmit,r=Object(c.useState)(""),o=Object(i.a)(r,2),l=o[0],u=o[1];return Object(c.useEffect)((function(){switch(a){case null:return void u("");case"auth/wrong-password":return void u("Incorrect password.");default:return void u("Something went wrong. Please try again.")}}),[a]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(U,{title:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3059\u308b"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s()},children:[Object(h.jsx)(D,{labelText:"\u73fe\u5728\u306e\u30d1\u30b9\u30ef\u30fc\u30c9",icon:Object(h.jsx)(k.a,{icon:C.j}),type:"password",id:"password",name:"password",value:n.password,onChange:t}),""!==l&&Object(h.jsx)("p",{className:"error",children:l}),Object(h.jsx)("button",{className:"btn btn-warning",children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5b8c\u5168\u306b\u524a\u9664\u3059\u308b"})]})]})},H=function(e){var t=e.handleChange,n=e.inputs,a=e.onSubmit,s=e.error,r=e.status,o=e.onBack,l=Object(c.useState)(""),u=Object(i.a)(l,2),d=u[0],j=u[1];return Object(c.useEffect)((function(){if(null!==s)switch(s.code){case null:return void j("");case"auth/wrong-password":return void j("Incorrect password.");default:return void j("Something went wrong. Please try again.")}else j("")}),[s]),Object(c.useEffect)((function(){return function(){return o()}}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(U,{title:"\u30e1\u30fc\u30eb\u3092\u66f4\u65b0\u3059\u308b"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a()},children:[Object(h.jsx)(D,{labelText:"\u30e6\u30fc\u30b6\u30fc\u540d",icon:Object(h.jsx)(k.a,{icon:C.s}),id:"username",name:"username",value:n.username,onChange:t}),Object(h.jsx)(D,{labelText:"\u73fe\u5728\u306e\u30d1\u30b9\u30ef\u30fc\u30c9",icon:Object(h.jsx)(k.a,{icon:C.j}),type:"password",id:"password",name:"password",value:n.password,onChange:t}),Object(h.jsx)(D,{labelText:"\u30e1\u30eb\u30a2\u30c9\u30ec\u30b9",icon:Object(h.jsx)(k.a,{icon:C.g}),id:"email",name:"email",value:n.email,onChange:t,placeholder:"\u30e1\u30eb\u30a2\u30c9\u30ec\u30b9"}),""!==d&&Object(h.jsx)("p",{className:"error",children:d}),Object(h.jsx)("button",{className:"btn btn-primary",style:{color:"white",background:"#526CC6",border:"unset"},disabled:""===n.password||""===n.email||""===n.username,children:"loading"===r?"\u8aad\u307f\u8fbc\u307f\u4e2d . . . ":"success"===r?"\u6210\u529f":"\u30e1\u30fc\u30eb\u3092\u66f4\u65b0\u3059\u308b"})]})]})},K=function(){var e=Object(c.useContext)(f).user,t=Object(c.useState)({email:e.email||"",password:"",newPassword:"",username:e.displayName||"",avatarUrl:e.photoUrl||""}),n=Object(i.a)(t,2),a=n[0],s=n[1],r=X(a.username,a.email,a.password,a.newPassword),l=r.loading,u=r.error,d=r.status,j=r.handleChangeEmail,b=r.handleChangePassword,O=r.handleDeleteAccount,g=r.resetStatus,x=Object(m.f)(),p=function(e){var t=e.target,n=t.name,c=t.value;s((function(e){return Object(A.a)(Object(A.a)({},e),{},Object(V.a)({},n,c))}))};return e||x.push("/log-in"),Object(h.jsx)("div",{className:"my-account",children:Object(h.jsx)("div",{className:"my-account-inner",style:{width:"50%",margin:"0 auto"},children:Object(h.jsxs)(m.c,{children:[Object(h.jsx)(m.a,{exact:!0,path:"/my-account",children:Object(h.jsxs)("div",{children:[Object(h.jsx)(U,{title:"\u30a2\u30ab\u30a6\u30f3\u30c8"}),Object(h.jsx)("div",{className:"account-data",children:Object(h.jsxs)(o.b,{to:"/my-account/change-email",className:"btn btn-tertiary",children:[Object(h.jsx)("span",{children:"\u30e1\u30fc\u30eb\u3092\u66f4\u65b0\u3059\u308b"}),Object(h.jsx)(k.a,{icon:C.c,className:"icon"})]})}),Object(h.jsx)("div",{className:"account-data",children:Object(h.jsxs)(o.b,{to:"/my-account/change-password",className:"btn btn-tertiary",children:[Object(h.jsx)("span",{children:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(h.jsx)(k.a,{icon:C.c,className:"icon"})]})}),Object(h.jsx)("div",{className:"account-data",children:Object(h.jsxs)(o.b,{to:"/my-account/delete-account",className:"btn btn-warning",children:[Object(h.jsx)(k.a,{icon:C.r}),"\xa0\xa0\xa0\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3059\u308b"]})})]})}),Object(h.jsx)(m.a,{exact:!0,path:"/my-account/change-email",children:Object(h.jsx)(H,{handleChange:p,inputs:a,loading:l,onSubmit:j,error:u,status:d,onBack:g})}),Object(h.jsx)(m.a,{exact:!0,path:"/my-account/change-password",children:Object(h.jsx)(Z,{handleChange:p,loading:l,inputs:a,onSubmit:b,error:u,status:d})}),Object(h.jsx)(m.a,{exact:!0,path:"/my-account/delete-account",children:Object(h.jsx)(G,{handleChange:p,inputs:a,onSubmit:O,error:u})})]})})})},Y=function(e){var t=e.closeMenu,n=e.userName,a=Object(c.useState)(""),s=Object(i.a)(a,2),r=s[0],l=s[1],u=Object(c.useState)(""),d=Object(i.a)(u,2),j=d[0],b=d[1];Object(c.useEffect)((function(){b("#"+O()),console.log(j),n&&l(n.charAt(0).toUpperCase())}),[n]);var O=function(){return Math.floor(16777215*Math.random()).toString(16)};return Object(h.jsxs)("div",{style:{position:"relative",display:"flex"},children:[Object(h.jsx)("div",{className:"avatar-btn",style:{backgroundColor:"".concat(j)},children:Object(h.jsx)("div",{className:"name",children:r})}),Object(h.jsx)("div",{className:"avt-links",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(o.c,{to:"/my-account",className:"link",onClick:function(){return t()},children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"})}),Object(h.jsx)("li",{children:Object(h.jsx)(o.c,{to:"/log-out",className:"link",onClick:function(){return t()},children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})})]})})]})},$=function(e){var t=e.onClick,n=e.isMenuOpen,a=e.mobile,s=void 0!==a&&a,r=e.onSearch,l=Object(c.useState)("navbar"),u=Object(i.a)(l,2),d=u[0],j=u[1],b="btn btn-hamburger small-screen-only "+(n&&"open"),O=Object(m.g)(),g=Object(c.useContext)(f).user,x=Object(c.useState)(""),p=Object(i.a)(x,2),v=p[0],k=p[1];return Object(c.useEffect)((function(){s||"/"===O.pathname?j("navbar"):j("navbar light")}),[O,s]),g?Object(h.jsx)("header",{className:d,style:{background:"#526CC6"},children:Object(h.jsxs)("div",{className:"navbar-inner",children:[Object(h.jsxs)("div",{className:"logo",children:[Object(h.jsx)(o.b,{to:"/",className:"logo",children:"\u30db\u30fc\u30e0"}),Object(h.jsx)("div",{style:{height:30,width:2,backgroundColor:"black",marginLeft:20,marginRight:20}}),Object(h.jsx)(o.b,{to:"/app",className:"logo",children:"\u79c1\u306e\u30d5\u30e9\u30c3\u30b7\u30e5\u30ab\u30fc\u30c9"})]}),Object(h.jsx)("input",{style:{outline:"unset",height:30,borderRadius:15,paddingLeft:10,borderColor:"white"},id:"search",name:"search",placeholder:"Search",value:v,onChange:function(e){k(e.target.value),r(e.target.value)}}),Object(h.jsxs)("div",{className:"right-nav",children:[Object(h.jsx)("nav",{className:"large-screen-only",children:Object(h.jsx)(Y,{closeMenu:function(){return null},userName:g.displayName})}),Object(h.jsxs)("button",{className:b,name:"toggle-menu",onClick:t,children:[Object(h.jsx)("span",{}),Object(h.jsx)("span",{})]})]})]})}):null},ee=function(e){e.allDecks;var t=Object(c.useContext)(f).user,n=Object(m.f)();return t||n.push("/log-in"),console.log(t),Object(h.jsx)(m.c,{children:Object(h.jsx)(m.a,{path:"/user",children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{className:"hero",children:Object(h.jsx)("section",{children:Object(h.jsx)("div",{className:"hero-content",children:Object(h.jsx)("div",{className:"buttons",children:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(o.b,{className:"btn btn-cta",to:"/app",children:"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9"})})})})})}),Object(h.jsx)("section",{className:"public-decks"})]})})})},te=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(m.f)(),d=Object(c.useContext)(f).user,j=x(d).decks,b=p(d).saveDecks,O=v().allDecks,g=Object(c.useState)([]),k=Object(i.a)(g,2),C=(k[0],k[1]),w=Object(c.useState)([]),S=Object(i.a)(w,2),N=(S[0],S[1]),y=Object(c.useState)([]),E=Object(i.a)(y,2),D=E[0],U=E[1],P=Object(c.useState)(!1),F=Object(i.a)(P,2),T=F[0],I=F[1],A=Object(c.useState)(""),L=Object(i.a)(A,2),R=L[0],B=L[1];Object(c.useEffect)((function(){T||C(j)}),[j]),Object(c.useEffect)((function(){T||N(b)}),[b]),Object(c.useEffect)((function(){T||U(O)}),[O]),Object(c.useEffect)((function(){R&&0!=R.length?(I(!0),C(j.filter((function(e){return e.title.includes(R)}))),N(b.filter((function(e){return e.title.includes(R)}))),U(O.filter((function(e){return e.title.includes(R)})))):(I(!1),C(j),N(b),U(O))}),[R]),Object(c.useEffect)((function(){d||a([])}),[d]);return d||u.push("/log-in"),Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)($,{onClick:function(e){switch(e.target.name){case"exit":return d?void u.push("/app"):void u.push("/");case"toggle-menu":return void l((function(e){return!e}));default:return}},isMenuOpen:o,onSearch:function(e){B(e)}}),Object(h.jsxs)(m.c,{children:[Object(h.jsx)(m.a,{path:"/log-in",children:Object(h.jsx)(q,{})}),Object(h.jsx)(m.a,{path:"/log-out",children:Object(h.jsx)("main",{children:Object(h.jsx)(Q,{})})}),Object(h.jsx)(m.a,{path:"/my-account",children:Object(h.jsx)("main",{children:Object(h.jsx)(K,{})})}),Object(h.jsx)(m.a,{path:"/user",children:Object(h.jsx)("main",{children:Object(h.jsx)(ee,{allDecks:D})})}),Object(h.jsx)(m.a,{path:"/set",children:Object(h.jsx)("main",{children:Object(h.jsx)(z,{allDecks:D,setSelectedDecks:a,selectedDecks:n})})})]})]})};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(o.a,{children:Object(h.jsx)(g,{children:Object(h.jsx)(te,{})})})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.0aa85cb9.chunk.js.map